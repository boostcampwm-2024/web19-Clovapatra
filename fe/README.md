## ğŸ” ë¬¸ì œ í•´ê²° ê³¼ì •

### ìƒˆë¡œìš´ ê²Œì„ë°©ì´ ì¶”ê°€ë  ë•Œ ìˆœì„œëŒ€ë¡œ ì¶”ê°€ë˜ì§€ ì•ŠìŒ

### useRoomStore ì‚¬ìš©

- í›…/ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì‚¬ìš©: useRoomStore()
- React ì™¸ë¶€ì˜ ë¹„ë™ê¸° ì‘ì—…, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬: useRoomStore.getState()

### ë³¸ì¸ ë‹‰ë„¤ì„ ìƒíƒœ ì €ì¥

- ë°©ì¥ ì—¬ë¶€ì— ë”°ë¼ ê²Œì„ ì‹œì‘/ê²Œì„ ì¤€ë¹„, ê°•í‡´ ë²„íŠ¼ ë³´ì„/ì•ˆ ë³´ì„ì´ ê²°ì • ë¨
- GameScreenì—ì„œ ìê¸°ìì‹ ì´ ë°©ì¥ì´ ì•„ë‹Œ ê±¸ ì•Œê¸° ìœ„í•´ì„œ currentPlayer ìƒíƒœ ì €ì¥í•˜ê³ , ìƒˆë¡œê³ ì¹¨ ì‹œ sessionStorageì—ì„œ ê°€ì ¸ì™€ì„œ ë‹¤ì‹œ ì €ì¥

### ì˜¤ë””ì˜¤ ê¶Œí•œ ìš”ì²­ hook ë¶„ë¦¬

- ë§ˆì´í¬ ê¶Œí•œ í—ˆìš©í•˜ì§€ ì•Šì„ ì‹œ ê²Œì„ë°© ì…ì¥ ë¶ˆê°€
  - hookìœ¼ë¡œ ë§ˆì´í¬ í—ˆìš© í™•ì¸ í›„ signalingSocket join
  - TODO: í—ˆìš©í•˜ì§€ ì•Šì„ ì‹œ Error ë©”ì‹œì§€ ì‚¬ìš©ìì—ê²Œ ë„ì›Œì•¼ í•¨
- CreateDialog, JoinDialogì— ë§ˆì´í¬ í—ˆìš© ì•ˆë‚´ ë¬¸êµ¬ ì¶”ê°€

### ìƒˆë¡œê³ ì¹¨ ì‹œ ì˜¤ë””ì˜¤ êº¼ì§ ë¬¸ì œ

- signalingSocket connectë˜ê¸° ì „(ì´ˆê¸°í™”ë˜ê¸° ì „) ì´ë²¤íŠ¸ emití•˜ì§€ ì•Šë„ë¡ setTimeout ì„¤ì •
- useReconnect hookì—ì„œ ì˜¤ë””ì˜¤ ì¬ì—°ê²° ì²˜ë¦¬í•´ ì¤˜ì•¼ í•¨

### ë³¸ì¸ì„ ì œì™¸í•œ ì‚¬ìš©ìë“¤ì˜ ë³¼ë¥¨ ì¡°ì ˆ

- ì‹œê·¸ë„ë§ ì†Œì¼“ì—ì„œ Audio Elementì˜ idë¥¼ peerId(ì†Œì¼“ id)ë¡œ ì„¤ì •í•˜ê³  ìˆìŒ
- ê·¸ëŸ°ë° í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ ì‚¬ìš©ì ë‹‰ë„¤ì„ê³¼ peerIdê°€ ë§¤ì¹­ë˜ëŠ” ì •ë³´ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ
- ì–´ë–¤ ì‚¬ìš©ìì˜ ë³¼ë¥¨ì„ ì¤„ì´ë ¤ë©´ í•´ë‹¹ ì‚¬ìš©ìì˜ peerIdë¡œ Audio Elementë¥¼ ì°¾ì•„ì•¼ í•¨
- ê·¸ë˜ì„œ ì‹œê·¸ë„ë§ ì†Œì¼“ join_room ì´ë²¤íŠ¸ ì†¡ì‹  ì‹œ playerNicknameì„ ê°™ì´ ì „ë‹¬í•˜ê³ , room_info ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•  ë•Œ playerNicknameì„ key, peerIdë¥¼ valueë¡œ í•˜ëŠ” ë°ì´í„°ë¥¼ ë°›ì•„ì˜¨ í›„ í•´ë‹¹ ë°ì´í„°ë¥¼ ê°€ì§€ê³  Audio Elementë¥¼ ì°¾ëŠ” ê²ƒìœ¼ë¡œ ì„œë²„ ì¸¡ê³¼ í•©ì˜
- signalingSocketì—ì„œ ë¡œê·¸ ì°ì–´ë³´ê³  ë™ì‘í•˜ê³  ìˆëŠ” ê±´ í™•ì¸í–ˆëŠ”ë°, ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸ëŠ” ë¶ˆê°€
  - ì™œëƒí•˜ë©´ ë‘˜ ë‹¤ ë‚˜ì´ê¸° ë•Œë¬¸.. ë‹¤ë¥¸ ì‚¬ëŒì˜ ë³¼ë¥¨ì„ ì¡°ì ˆ í•˜ë ¤ë©´ ê²°êµ­ í•œ ì‚¬ìš©ìëŠ” ë§ˆì´í¬ë¥¼ ì¼œì•¼ í•˜ëŠ”ë°, ë‘˜ ë‹¤ ë‚´ ëª©ì†Œë¦¬ë‹ˆê¹Œ êµ¬ë¶„ì´ ì•ˆ ë¨
  - ë³¸ì¸ ë§ˆì´í¬ ìŒì†Œê±°ëŠ” í…ŒìŠ¤íŠ¸ ì™„
- ë¬¸ì œ ë°œê²¬: ê²Œì„ë°©ì— ì²˜ìŒ ì…ì¥í•˜ë©´ gainNodeê°€ ì—†ìŒ -> ìƒˆë¡œê³ ì¹¨ í•˜ë©´ ë˜ëŠ”ë° ì™œì§€..?  
  ëŠë‚Œìƒ room_infoì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì™€ì„œ ìƒíƒœ ì €ì¥í•˜ê¸° ì „ì— setVolumeì„ í•˜ë ¤ê³  í•´ì„œ ê·¸ëŸ° ê²ƒ ê°™ìŒ
  ```tsx
  setVolume(peerId: string, volume: number) {
    const gainNode = this.gainNodes.get(peerId);
    if (gainNode) {
      gainNode.gain.value = volume;
      console.log(gainNode.gain.value);
    }
  }
  ```

### ë°©ì„ ì²˜ìŒ ìƒì„±í•  ë•Œ room_info ì´ë²¤íŠ¸ë¡œ ìˆ˜ì‹ í•˜ëŠ” userMappingsì— hostNicknameì´ ì•ˆ ë‹´ê¸°ëŠ” ë¬¸ì œ

- useEffect ë‚´ì—ì„œ signalingSocketì— join í•˜ê³  ìˆì–´ì„œ ì•ˆ ë¨
- resetAndCloseë¡œ Dialog ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ë˜ëŠ”ë° useEffect ì‹¤í–‰ ì‹œë„
  - Dialogê°€ ë„ˆë¬´ ì¼ì° ì–¸ë§ˆìš´íŠ¸ë¼ì„œ useEffect ì‹¤í–‰ì´ ì œëŒ€ë¡œ ì•ˆ ë¨
  - ë¹„ë™ê¸° ì‘ì—… ìˆœì„œê°€ ë³´ì¥ë˜ì§€ ì•ŠìŒ
- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë°©ì‹
  - ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë¨¼ì € ë“±ë¡í•˜ê³  ë°© ìƒì„± ìš”ì²­í•˜ì—¬ ì‘ì—… ìˆœì„œ ë³´ì¥
  - ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°ì™€ ê´€ê³„ì—†ì´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë™ì‘

### AudioContext -> HTMLAudioElement ì‚¬ìš©ìœ¼ë¡œ ë³€ê²½

- ë‹¨ìˆœ ë³¼ë¥¨ ì¡°ì ˆë§Œ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— AudioContextë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤ê³  íŒë‹¨
- useAudioManager hookì—ì„œ ì›ê²© ìŠ¤íŠ¸ë¦¼ ì„¤ì •(Audio Element ìƒì„±), ë³¼ë¥¨ ì¡°ì ˆ, íŠ¹ì • Audio Element ì œê±°, ëª¨ë“  Audio Elements ì œê±° í•¨ìˆ˜ë¥¼ ì œê³µí•˜ì—¬ signalingSocket ë° VolumeBarì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨
- GamePageì—ì„œ useEffectì— audioManager ì˜ì¡´ì„± ì£¼ì…ì´ í•„ìš”í•œ ì´ìœ 

  - signalingSocketì€ í´ë˜ìŠ¤ë¡œ êµ¬í˜„ë˜ì–´ ìˆì–´ React hookì„ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
  - GamePage ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ audioManagerë¥¼ nullë¡œ ì„¤ì •í•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•˜ê³ , í˜ì´ì§€ë¥¼ ë‚˜ê°„ í›„ì—ë„ ì˜¤ë””ì˜¤ê°€ ê³„ì† ì¬ìƒë˜ëŠ” ê²ƒì„ ë§‰ìŒ
  - useEffectê°€ ì—†ìœ¼ë©´ ì›ê²© ìŠ¤íŠ¸ë¦¼ì„ ë°›ì•˜ì„ ë•Œ audioManagerê°€ ì—†ì–´ ì˜¤ë””ì˜¤ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ì—†ë‹¤.
  - ì•„ë˜ì™€ ê°™ì´ í•˜ê²Œ ë˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ audioManagerë¥¼ nullë¡œ ì„¤ì •í•˜ëŠ” ì •ë¦¬ ì‘ì—…ì„ í•  ìˆ˜ ì—†ê³ , ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë  ë•Œë§ˆë‹¤ setAudioManagerê°€ í˜¸ì¶œëœë‹¤. useEffectë¥¼ ì‚¬ìš©í•˜ë©´ audioManagerê°€ ë³€ê²½ë  ë•Œë§Œ í˜¸ì¶œ ë¨

    ```tsx
    const GamePage = () => {
      const audioManager = useAudioManager();
      signalingSocket.setAudioManager(audioManager);
    };
    ```

### Voice Server Error: Invalid session

- ë°©ì¥ì´ ê²Œì„ ì‹œì‘ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, ì œëŒ€ë¡œ ë™ì‘í•  ë•Œë„ ìˆê³  ì´ ì—ëŸ¬ê°€ ëœ° ë•Œë„ ìˆë‹¤.
- ì—ëŸ¬ê°€ ëœ¨ê³  ë‹¤ì‹œ ëˆŒë €ì„ ë•Œ ë‹¤ì‹œ ë™ì‘í•  ë•Œë„ ìˆê³ , ê³„ì† ì•ˆ ë  ë•Œë„ ìˆë‹¤.
- ì™œ ê·¸ëŸ¬ëŠ”ì§€ ëª¨ë¥´ê² ë‹¤..!
